name: Build macOS Project
inputs:
  project-dir:
    required: true
  config:
    required: true
outputs:
  build-dir:
    value: ${{ steps.generate.outputs.build-dir }}
runs:
  using: composite
  steps:
  - name: Build project
    shell: bash
    working-directory: ./${{ inputs.project-dir }}/Builds/MacOSX
    run: |
      xcodebuild -configuration ${{ inputs.config }} \
                 GCC_TREAT_WARNINGS_AS_ERRORS=YES

  - name: Generate outputs
    id: generate
    shell: bash
    run: echo "build-dir=${{ inputs.project-dir }}/Builds/MacOSX/build/${{ inputs.config }}" >> "${GITHUB_OUTPUT}"
